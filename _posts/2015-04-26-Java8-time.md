---
layout: post
title: Java 8 time
tags: java
---

Lets assume you have a simple task to create specific date (for example 01-12-2016) and print it on screen. How would it look like in Java 7?

{% highlight java %}
DateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");
Date date = null;
try {
   date = formatter.parse("01-12-2016");
} catch (ParseException e) {
   // handle parse exception
}
System.out.println(formatter.format(date));
{% endhighlight %}

Add one day to given date:

{% highlight java %}
Calendar calendar = Calendar.getInstance();
calendar.setTime(date);
calendar.add(Calendar.DAY_OF_MONTH, 1);
Date dayAfter = calendar.getTime();
System.out.println(formatter.format(dayAfter));
{% endhighlight %}


Does that rings a bell? Probably <a href="http://www.joda.org/joda-time/" target="_blank">Joda library</a> would be a better choice..
{% highlight java %}
DateTimeFormatter formatterJoda = DateTimeFormat.forPattern("dd-MM-yyyy");
DateTime jodaDate = DateTime.parse("01-12-2016", formatterJoda);
System.out.println("jodaDate = " + formatterJoda.print(jodaDate));

DateTime dayAfter = jodaDate.plusDays(1);
System.out.println("dayAfter = " + formatterJoda.print(dayAfter));
{% endhighlight %}


In java 8 that's much simpler. Take a look:

{% highlight java %}
DateTimeFormatter formatter = DateTimeFormatter.ofPattern("dd-MM-yyyy");
LocalDate date = LocalDate.parse("01-12-2016", formatter);
System.out.println(formatter.format(date));
{% endhighlight %}
or
{% highlight java %}
LocalDate date = LocalDate.of(2016, Month.DECEMBER, 1);
System.out.println(formatter.format(date));
{% endhighlight %}

and
{% highlight java %}
LocalDate dateAfter = date.plusDays(1);
System.out.println(dayAfter);
{% endhighlight %}

Those are really simple and basic examples but in my opinion they show the simplicity and clarity of date-time  API usage in java 8. 
So what's happened here? Oracle and author of Joda library Stephen Colebourne joined forces.
  
First of all, new date time API is thread-safe (also date time formatters which was a big burden in previous version of java). Most of the classes create objects that are immutable, so after the object is created, it cannot be modified.

What you'll notice first are LocalDate and LocalTime classes that are representation od date and time values. There's also a composite class called LocalDateTime which purpose can be easily guessed. If you need to express time in specific time zone - ZonedDateTime is there for you.

Below few examples how date and time can be created:
{% highlight java %}
LocalDate dateV1 = LocalDate.of(2015, 4, 26);
LocalDate date = LocalDate.of(2015, Month.APRIL, 26); // type safe for month because is January 0 or 1 ? (1 btw)

//date and time combined
LocalTime now = LocalTime.now();
LocalDateTime dateTime = date.atTime(after8hours);
{% endhighlight %}

Date manipulation
{% highlight java %}
LocalDateTime now = LocalDateTime.now();
LocalDateTime dayInPast = now.withDayOfMonth(02).withYear(2014);
LocalDateTime earlierDate = dayInPast.plusWeeks(2).plus(3, ChronoUnit.WEEKS);
{% endhighlight %}
 
Enum ChronoUnit is particularly interesting. We can use it to add to Date second, days, months, centuries and even - forever which is Long max value.

Adjusters - according to documentation - a block of code that can be used to wrap up common processing logic. API provides some predefined adjusters but also those could be defined by developers.
Some examples:
{% highlight java %}
LocalDateTime now = LocalDateTime.now();
LocalDateTime nextMonthFirstDay = now.with(TemporalAdjusters.firstDayOfNextMonth());

// adjusts the date to the first occurrence of the specified day-of-week before the date being adjusted unless it is already on that day in which case the same object is returned.
LocalDateTime lastMonday = now.with(TemporalAdjusters.previousOrSame(DayOfWeek.MONDAY));

LocalDateTime nextMonday = now.with(TemporalAdjusters.next(DayOfWeek.FRIDAY));

//next friday after 26.02.2025
LocalDateTime nextFriday = LocalDateTime.of(2025, Month.FEBRUARY, 26, 12, 30).with(TemporalAdjusters.next(DayOfWeek.FRIDAY));
{% endhighlight %}

